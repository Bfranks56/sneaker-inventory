# Sneaker Inventory - Spring Boot API

A full-stack sneaker inventory management system with PostgreSQL database and Spring Boot REST API.

## Table of Contents
- [Prerequisites](#prerequisites)
- [Database Setup](#database-setup)
- [Application Setup](#application-setup)
- [Running the Application](#running-the-application)
- [Testing the API](#testing-the-api)
- [Project Structure](#project-structure)
- [API Endpoints](#api-endpoints)
- [Troubleshooting](#troubleshooting)

---

## Prerequisites

Make sure you have the following installed:

- **Java 17 or 21** - Check with `java -version`
- **Gradle** - Included via Gradle wrapper (`./gradlew`)
- **PostgreSQL 15** - Installed via Homebrew
- **Homebrew** (Mac) - For PostgreSQL installation

---

## Database Setup

### 1. Install PostgreSQL (if not already installed)
```bash
# Install PostgreSQL via Homebrew
brew install postgresql@15

# Start PostgreSQL service
brew services start postgresql@15

# Add PostgreSQL to PATH (if not already done)
export PATH="/opt/homebrew/opt/postgresql@15/bin:$PATH"

# Make PATH change permanent
echo 'export PATH="/opt/homebrew/opt/postgresql@15/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc
```

### 2. Create the Database
```bash
# Create the sneaker_inventory database
createdb sneaker_inventory

# Verify database was created
psql -l | grep sneaker_inventory
```

### 3. Verify Database Connection
```bash
# Connect to the database
psql sneaker_inventory

# You should see the PostgreSQL prompt:
# sneaker_inventory=#

# Exit with:
\q
```

---

## Application Setup

### 1. Clone/Navigate to Project Directory
```bash
cd /path/to/sneaker-inventory
```

### 2. Verify Configuration

Check that `src/main/resources/application.properties` contains:
```properties
# Database Connection
spring.datasource.url=jdbc:postgresql://localhost:5432/sneaker_inventory
spring.datasource.username=rumble
spring.datasource.password=

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Server Port
server.port=8080
```

**Note:** Replace `rumble` with your Mac username if different. Find it with `whoami`.

### 3. Build the Project (Optional)
```bash
# Clean and build the project
./gradlew clean build
```

---

## Running the Application

### Start PostgreSQL (if not already running)
```bash
# Check if PostgreSQL is running
brew services list | grep postgresql

# Start if stopped
brew services start postgresql@15
```

### Start the Spring Boot Application
```bash
# Run the application
./gradlew bootRun
```

### Verify Application Started

You should see output like:
```
Tomcat started on port 8080 (http) with context path '/'
Started SneakerInventoryApplication in X.XXX seconds
```

And this SQL indicating the table was created:
```sql
Hibernate: create table sneakers (
    id bigint generated by default as identity,
    condition varchar(255) not null,
    model_number varchar(255),
    name varchar(255) not null,
    size float(53) not null,
    primary key (id)
)
```

**Application is now running at:** `http://localhost:8080`

---

## Testing the API

### Using curl

Open a **new terminal window** (keep the app running in the first one).

#### 1. Create a Sneaker (POST)
```bash
curl -X POST http://localhost:8080/api/sneakers \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Air Jordan 1 Retro High",
    "modelNumber": "555088-134",
    "size": 10.5,
    "condition": "DS"
  }'
```

**Expected Response:**
```json
{"id":1,"name":"Air Jordan 1 Retro High","modelNumber":"555088-134","size":10.5,"condition":"DS"}
```

#### 2. Get All Sneakers (GET)
```bash
curl http://localhost:8080/api/sneakers
```

**Expected Response:**
```json
[{"id":1,"name":"Air Jordan 1 Retro High","modelNumber":"555088-134","size":10.5,"condition":"DS"}]
```

#### 3. Get Single Sneaker (GET by ID)
```bash
curl http://localhost:8080/api/sneakers/1
```

#### 4. Update Sneaker (PUT)
```bash
curl -X PUT http://localhost:8080/api/sneakers/1 \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Air Jordan 1 Retro High",
    "modelNumber": "555088-134",
    "size": 10.5,
    "condition": "LIGHTLY_WORN"
  }'
```

#### 5. Delete Sneaker (DELETE)
```bash
curl -X DELETE http://localhost:8080/api/sneakers/1
```

---

## Project Structure
```
sneaker-inventory/
├── src/
│   ├── main/
│   │   ├── java/com/sneakers/sneaker_inventory/
│   │   │   ├── model/
│   │   │   │   ├── Sneaker.java          # Entity (database table)
│   │   │   │   └── Condition.java        # Enum (DS, VNDS, etc.)
│   │   │   ├── repository/
│   │   │   │   └── SneakerRepository.java # Database operations
│   │   │   ├── service/
│   │   │   │   └── SneakerService.java    # Business logic
│   │   │   ├── controller/
│   │   │   │   └── SneakerController.java # REST API endpoints
│   │   │   └── SneakerInventoryApplication.java # Main application
│   │   └── resources/
│   │       └── application.properties     # Configuration
│   └── test/                              # Test files
├── build.gradle                           # Dependencies & build config
└── README.md                              # This file
```

---

## API Endpoints

| Method | Endpoint | Description | Request Body |
|--------|----------|-------------|--------------|
| **POST** | `/api/sneakers` | Create a new sneaker | Sneaker JSON |
| **GET** | `/api/sneakers` | Get all sneakers | None |
| **GET** | `/api/sneakers/{id}` | Get sneaker by ID | None |
| **PUT** | `/api/sneakers/{id}` | Update sneaker | Sneaker JSON |
| **DELETE** | `/api/sneakers/{id}` | Delete sneaker | None |

### Sneaker JSON Format
```json
{
  "name": "Air Jordan 1 Retro High",
  "modelNumber": "555088-134",
  "size": 10.5,
  "condition": "DS"
}
```

### Valid Condition Values

- `DS` - Deadstock (brand new)
- `VNDS` - Very Near Deadstock
- `LIGHTLY_WORN`
- `WORN`
- `HEAVILY_WORN`

---

## Viewing Database Data

### Option 1: Command Line (psql)
```bash
# Connect to database
psql sneaker_inventory

# View all sneakers
SELECT * FROM sneakers;

# View table structure
\d sneakers

# Exit
\q
```

### Option 2: DBeaver (GUI - Recommended)

1. Download: https://dbeaver.io/download/
2. Open DBeaver
3. Click "New Database Connection"
4. Select "PostgreSQL"
5. Configure:
    - **Host:** `localhost`
    - **Port:** `5432`
    - **Database:** `sneaker_inventory`
    - **Username:** `rumble` (your Mac username)
    - **Password:** (leave empty)
6. Click "Test Connection" then "Finish"
7. Browse `sneaker_inventory` → `public` → `Tables` → `sneakers`

---

## Stopping the Application

### Stop Spring Boot

In the terminal where `./gradlew bootRun` is running:
- Press `Ctrl + C`

### Stop PostgreSQL (if needed)
```bash
# Stop PostgreSQL service
brew services stop postgresql@15
```

---

## Troubleshooting

### Error: "role 'postgres' does not exist"

**Solution:** Update `application.properties` username to your Mac username:
```properties
spring.datasource.username=rumble  # Change to your username (run `whoami`)
```

### Error: "database 'sneaker_inventory' does not exist"

**Solution:** Create the database:
```bash
createdb sneaker_inventory
```

### Error: "command not found: createdb"

**Solution:** PostgreSQL bin directory not in PATH:
```bash
export PATH="/opt/homebrew/opt/postgresql@15/bin:$PATH"
echo 'export PATH="/opt/homebrew/opt/postgresql@15/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc
```

### Error: Port 8080 already in use

**Solution:** Kill the process using port 8080:
```bash
# Find process using port 8080
lsof -ti:8080

# Kill the process (replace PID with number from above)
kill -9 <PID>
```

Or change the port in `application.properties`:
```properties
server.port=8081
```

### Application won't start - Gradle errors

**Solution:** Clean and rebuild:
```bash
./gradlew clean build --refresh-dependencies
```

---

## Tech Stack

- **Backend:** Spring Boot 3.4.12
- **Build Tool:** Gradle
- **Database:** PostgreSQL 15
- **ORM:** Hibernate/JPA
- **Java Version:** 21
- **Language:** Java

---

## Next Steps

- [ ] Add `imageUrl` field to store sneaker images
- [ ] Build Angular frontend to display sneakers
- [ ] Add search/filter functionality
- [ ] Implement image upload (Cloudinary/AWS S3)
- [ ] Add authentication
- [ ] Deploy to production

---

## Architecture Pattern

This application follows the standard 4-layer Spring Boot architecture:
```
Controller Layer  (HTTP requests/responses)
      ↓
Service Layer     (Business logic)
      ↓
Repository Layer  (Database operations)
      ↓
Database Layer    (PostgreSQL)
```

---

## Additional Resources

- **Spring Boot Docs:** https://spring.io/guides
- **PostgreSQL Docs:** https://www.postgresql.org/docs/
- **Gradle Docs:** https://docs.gradle.org/

---

## Author

Built as a learning project for Ford Motor Company backend development patterns.

**Date Created:** December 1, 2025